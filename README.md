# Model of a Bank Database System Created in SQL
This project is still a **WORK IN PROGRESS**. It is a simplified **model of a bank database system created in MySQL**. It simulates common tasks of a bank, such as registrations of clients, creation of different types of accounts, executing transactions using double entry accounting, etc. The model considers a fictional bank based in Slovakia.

The database is equiped with multiple mechanisms like triggers, procedures and events that simplify data entry, ensure data consistency and prevent violations of internal rules of the bank.

In addition, the database contains a complex stored procedure called "p03_generate_new_client", which populates the tables in the database with mock data on a single client, along with their personal data, accounts as well as regular transactions. The generated data will be eventually used for analysis and data visualizations.

## Clients Table
- It containts personal and contact data of clients as well as their "client_id" (PK), through which it is linked with the "accounts" table.
- The data in the table represent mock data generated by procedure "p03_generate_new_client".
  - First names come from names listed in the Slovak calendar
  - Last names represent common Slovak surnames
  - Birth dates are generated in a way that follows the real age distribution in Slovakia
  - Email is generated based on the previous three pieces of data
  - The procedure prevents and corrects common errors in the email address and the phone number, such as invalid characters or incorrect format.
  - In the city column you can find 175 biggest Slovak municipalities in terms of population, which is also reflected in weights of the random selection
- However, it is possible to register a non-generated client as well using procedure "p01_register_new_client"

<img width="1135" height="451" alt="Clients" src="https://github.com/user-attachments/assets/93b66954-cfae-4e8a-add9-500f5caa1c45" />
<br/>
<br/>
<br/>

## Accounts Table
- It contains data on clients' accounts, with IBAN being the primary key, through which it is linked to the "transactions" table.
- The IBAN is also generated by procedure "p03_generate_new_client".
  - It contains a bank code of a non-existent bank: "9700"
  - The account type is reflected in the two digits that follow.
  - All generated IBANs follow the MOD 97 verification standard.
- There are three types of accounts:
  - personal account
  - student account
  - business account
  - savings account
  - term deposit
- At this point of the project only personal and student accounts have been employed so far.
- The "balance" column gets updated according to corresponding transactions.
  
<img width="765" height="448" alt="Accounts" src="https://github.com/user-attachments/assets/97449c7d-487b-4972-bf92-97c4be2ca282" />
<br/>
<br/>
<br/>

## Transactions Table
- "transaction_id" is the table's primary key.
-  It is linked to the "categories" table through "category_id"
- The table employes double entry accounting, with each transaction being reflected on two accounts (debit account and credit account), unless it is a cash deposit or withdrawal.

<img width="1375" height="451" alt="Transactions" src="https://github.com/user-attachments/assets/e76297a9-db49-4399-85da-ad8d96fccbac" />
<br/>
<br/>
<br/>

## Categories Table
- This table contains category names of category IDs, which are used in the "transactions" table.

<img width="326" height="473" alt="Categories" src="https://github.com/user-attachments/assets/6b9a0d14-870e-48cf-9657-1bc9391b6360" />
<br/>
<br/>
<br/>


## Regular Transactions Table
- This is a special table, which is stored in a different database called "source_tables", because in fact it is not a part of the bank system, which consists of the four aforementioned tables.
- This table contains data on regular transactions (salaries, pensions, mortgage payments, rent payments, etc.) of generated clients.
- Event "e01_execute_regular_transactions" then executes these transactions (inserts into "transactions") each month on their due days.
<img width="1013" height="473" alt="Regular transactions" src="https://github.com/user-attachments/assets/a9b2a35b-e741-499c-8c46-5c35268f9c35" />
<br/>
<br/>
<br/>

# Stored Routines
- This is just a glimpse of the different stored routines used in the model.
- For a more detailed explanation of each of these, access the "bank_system_script.sql" file.
<br/>

## Triggers
<img width="685" height="367" alt="Triggers" src="https://github.com/user-attachments/assets/9c1855f0-773e-4dbf-acff-9115f8c6d383" />
<br/>

## Stored Procedures
<img width="363" height="106" alt="Procedures" src="https://github.com/user-attachments/assets/d32daa5b-8c76-4087-b456-d681f3869083" />
<br/>

## Events
<img width="1009" height="67" alt="Events" src="https://github.com/user-attachments/assets/754830b3-ceb8-4fa6-a8db-7e01044a6842" />
